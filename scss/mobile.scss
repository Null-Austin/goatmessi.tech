// Sass variables for breakpoints
$breakpoint-large: 1024px;
$breakpoint-tablet: 768px;
$breakpoint-phone: 480px;
$breakpoint-small-phone: 320px;

/* General compatibility and UI improvements for all devices */

// Cross-browser compatibility fixes
* {
  box-sizing: border-box;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-tap-highlight-color: transparent;
}

// Improve image rendering across browsers
img {
  max-width: 100%;
  height: auto;
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
}

// Fix for touch devices - better tap targets
a,
button {
  min-width: 44px;
  min-height: 44px;
  touch-action: manipulation;
}

// Prevent text size adjust after orientation change
html {
  -webkit-text-size-adjust: 100%;
  -moz-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

// Responsive embedded content
iframe,
video,
embed,
object {
  max-width: 100%;
  height: auto;
}

// Better viewport unit handling on mobile
body {
  min-height: 100vh;
  /* mobile viewport bug fix */
  min-height: -webkit-fill-available;
}

html {
  height: -webkit-fill-available;
}

// Smoother scrolling on all devices
html {
  scroll-behavior: smooth;
  overflow-x: hidden;
}

body {
  overflow-x: hidden;
}

// Fix grid layout on smaller viewports
#content {
  min-height: 100vh;
  max-width: 100%;
  overflow-x: hidden;
  padding-top: 10px; // Add some top padding for mobile

  > * {
    min-width: 0; // Prevent grid blowout
    margin-left: 10px;
    margin-right: 10px;
  }
}

// Ensure images don't overflow their containers
#content > #header #icon {
  max-width: 100%;
  object-fit: contain;
}

.side2 img {
  max-width: 100%;
  object-fit: contain;
}

// Better font scaling across devices
#content {
  font-size: clamp(12px, 1.8vw, 14px);
}

.side a {
  font-size: clamp(2.5vh, 4vh, 5vh);
}

#content > #headerimage h3 {
  font-size: clamp(1.8rem, 5vw, 3.5rem);
  word-wrap: break-word;
}

// Improve background image scaling
#content > #headerimage,
#content > #altimage,
#content > #extrainfo {
  background-attachment: scroll; // Better performance on mobile
}

// Make borders and shadows scale better
.part-of-content {
  border-width: clamp(1px, 0.15vw, 2px);
  box-shadow: 0px clamp(2px, 0.4vw, 4px) black;
}

// Fix for Safari's 100vh issue & general height adjustments
#content > #headerimage,
#content > #altimage,
#content > #extrainfo {
  min-height: 0;
  height: clamp(250px, 40vh, 500px);
}

#content > #headerimage:hover,
#content > #headerimage.selected {
  height: clamp(350px, 65vh, 700px);
}

// Improve text readability
#content > #headerimage {
  p, h3 {
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
  }
}

// Better footer spacing on all devices
#content > #footer {
  padding: clamp(8px, 1.5vh, 15px);
  
  span {
    display: inline-block;
    max-width: 95%;
    text-align: center;
  }
}

// Improve Twitter embed responsiveness
#extrainfo .twitter-tweet.twitter-tweet-rendered {
  width: 100% !important;
  max-width: 100%;
  margin-left: auto;
  margin-right: auto;
}

// Fix for flexbox on older browsers
#content > #extrainfo {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
}

// Improve grid support fallback
@supports not (display: grid) {
  #content {
    display: block;
    
    > * {
      width: auto;
      margin-bottom: 10px;
    }
  }
}

// Specific screen size adjustments

/* Tablets and larger phones */
@media (max-width: $breakpoint-tablet) { // 768px
  #content {
    grid-template-columns: 1fr; // Single column layout
    
    > #header {
      grid-template-columns: 1fr 1fr; // Two columns for header
      height: auto;
      padding: 10px;

      .side1 {
        justify-content: flex-start;
      }

      .side2 {
        display: none; // Hide the middle slogan
      }

      .side3 {
        justify-content: flex-end;
      }
    }

    > #altimage,
    > #extrainfo {
      grid-column: 1 / -1; // Span full width
      margin: 0 10px 10px;
      height: clamp(200px, 30vh, 350px);
    }

    > #headerimage p {
      width: 70%;
      font-size: clamp(12px, 1.8vw, 14px);
    }
  }
}

/* Smaller phones */
@media (max-width: $breakpoint-phone) { // 480px
  #content > #header {
    grid-template-columns: 1fr; // Single column header
    
    .side {
      justify-content: center !important;
      text-align: center;
      margin-bottom: 10px;
    }

    .side3 {
      display: none; // Hide socials on small screens
    }
  }

  #content > #headerimage h3 {
    font-size: clamp(1.5rem, 8vw, 2.2rem);
  }

  #content > #headerimage p {
    display: none; // Hide paragraph by default
  }

  #content > #headerimage:hover,
  #content > #headerimage.selected {
    height: clamp(280px, 45vh, 350px);
    
    p {
      display: block; // Show paragraph on interaction
      width: 85%;
      font-size: 11px;
    }
  }
}

/* Very small devices */
@media (max-width: $breakpoint-small-phone) { // 320px
  #content > #header .side1 span {
    font-size: 20px;
  }
  
  #content > #header #icon {
    height: 8vh;
  }
}